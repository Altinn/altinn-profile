{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": [
    "local>Altinn/renovate-config"
  ],
  "customManagers": [
    {
      "customType": "regex",
      "description": "Manage Alpine OS versions in container image tags",
      "managerFilePatterns": [
        "/Dockerfile/"
      ],
      "matchStrings": [
        "(?:FROM\\s+)(?<depName>[\\S]+):(?<currentValue>[\\S]+)@(?<currentDigest>sha256:[a-f0-9]+)"
      ],
      "versioningTemplate": "regex:^(?<compatibility>[\\S]*\\d+\\.\\d+(?:\\.\\d+)?(?:[\\S]*)?-alpine-?)(?<major>\\d+)\\.(?<minor>\\d+)(?:\\.(?<patch>\\d+))?$",
      "datasourceTemplate": "docker"
    }
  ],
  "packageRules": [
    {
      "description": "Disable minimumReleaseAge for digest updates since they lack release timestamps (ref. https://docs.renovatebot.com/key-concepts/minimum-release-age/#which-update-types-take-minimumreleaseage-into-account)",
      "matchUpdateTypes": [
        "digest"
      ],
      "minimumReleaseAge": null
    },
    {
      "matchManagers": [
        "nuget"
      ],
      "matchUpdateTypes": [
        "major"
      ],
      "groupName": "Grouped major upgrades: {{depName}}",
      "matchPackageNames": [
        "//^([^\\.]+)//"
      ]
    }
  ]
}